<!-- Novo missions.html com ajustes visuais para integrar ao novo index.html -->
<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Mini Tycoon ‚Äî Miss√µes Dif√≠ceis</title>
  <style>
    :root{
      --bg:#0f1724; --card:#0b1220; --accent:#7c3aed; --muted:#94a3b8; --glass: rgba(255,255,255,0.04);
      --success:#16a34a; --danger:#ef4444; --text:#e6eef8;
    }
    body.palette-red { --accent: #ef4444; }
    body.palette-yellow { --accent: #f59e0b; }
    body.palette-purple { --accent: #7c3aed; }
    body.palette-black { --accent: #111827; }
    body.palette-default { --accent: #7c3aed; }
    *{box-sizing:border-box;font-family:Inter,ui-sans-serif,system-ui,Segoe UI,Roboto,"Helvetica Neue",Arial;margin:0;}
    body,html{min-height:100%;background:var(--bg);color:var(--text);}
    .wrap{max-width:900px;margin:28px auto;padding:20px;}
    header{display:flex;align-items:center;gap:16px;margin-bottom:20px;background:var(--card);padding:12px 20px;border-radius:10px;box-shadow:0 2px 6px rgba(0,0,0,0.4);}
    .logo{font-weight:700;font-size:20px;color:var(--accent);display:flex;gap:10px;align-items:center;}
    .logo .emoji{font-size:24px;}
    .back-btn{
      margin-left:auto;background:var(--accent);color:#fff;border:none;padding:8px 14px;border-radius:8px;font-weight:700;cursor:pointer;
    }
    .back-btn:hover{opacity:0.85;}
    h2{margin:10px 0 20px;color:var(--accent);}
    .missions-list{display:flex;flex-direction:column;gap:14px;}
    .mission-card{background:var(--card);border-radius:12px;padding:16px 20px;box-shadow:0 4px 12px rgba(0,0,0,0.4);border:1px solid transparent;transition:border-color 0.3s ease;}
    .mission-card:hover{border-color:var(--accent);}
    .mission-title{font-weight:700;font-size:18px;margin-bottom:6px;}
    .mission-desc{font-size:14px;color:var(--muted);margin-bottom:8px;line-height:1.4;}
    .mission-reward{font-weight:700;color:var(--success);}
    .mission-progress{margin-top:8px;height:12px;background:rgba(255,255,255,0.1);border-radius:8px;overflow:hidden;}
    .mission-progress>div{height:100%;background:var(--accent);width:0%;transition:width 0.4s ease;}
    .mission-button{margin-top:12px;background:var(--accent);color:white;border:none;border-radius:8px;padding:10px 18px;font-weight:700;cursor:pointer;}
    .mission-button:disabled{background:rgba(124,58,237,0.4);cursor:not-allowed;}
    .mission-button:hover:not(:disabled){opacity:0.85;}
    .footer{margin-top:30px;font-size:13px;color:var(--muted);text-align:center;}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="logo"><span class="emoji">üéØ</span> Miss√µes Dif√≠ceis</div>
      <button class="back-btn" id="backBtn">Voltar ao jogo</button>
    </header>
    <h2>Desafios que exigem tempo e dedica√ß√£o</h2>
    <div class="missions-list" id="missionsList"></div>
    <div class="footer">Para completar as miss√µes, voc√™ precisar√° investir bastante tempo, moedas e upgrades!</div>
  </div>
  <script>
    const missions = [
      {
        id: 'm1',
        title: 'Trabalhador Incans√°vel',
        desc: 'Compre 50 Workers para acelerar sua produ√ß√£o ao m√°ximo.',
        reward: '5000 coins',
        requirement: (state) => state.workers >= 50,
        progress: (state) => Math.min(1, state.workers / 50)
      },
      {
        id: 'm2',
        title: 'Colheita Massiva',
        desc: 'Colha um total de 100.000 coins durante o jogo (soma acumulada).',
        reward: '10000 coins',
        requirement: (state) => state.totalEarned >= 100000,
        progress: (state) => Math.min(1, state.totalEarned / 100000)
      },
      {
        id: 'm3',
        title: 'Fazendeiro de Elite',
        desc: 'Compre 30 Mini Fazendas para maximizar sua produ√ß√£o agr√≠cola.',
        reward: '8000 coins',
        requirement: (state) => {
          const farm = window.shopItems.find(i => i.id === 'farm');
          return farm && farm.qty >= 30;
        },
        progress: (state) => {
          const farm = window.shopItems.find(i => i.id === 'farm');
          return farm ? Math.min(1, farm.qty / 30) : 0;
        }
      },
      {
        id: 'm4',
        title: 'Ind√∫stria Pesada',
        desc: 'Adquira 15 F√°bricas para produzir em grande escala.',
        reward: '15000 coins',
        requirement: (state) => {
          const factory = window.shopItems.find(i => i.id === 'factory');
          return factory && factory.qty >= 15;
        },
        progress: (state) => {
          const factory = window.shopItems.find(i => i.id === 'factory');
          return factory ? Math.min(1, factory.qty / 15) : 0;
        }
      },
      {
        id: 'm5',
        title: 'Upgrades M√°ximos',
        desc: 'Compre todos os upgrades dispon√≠veis no jogo.',
        reward: '12000 coins',
        requirement: (state) => {
          return window.upgradesList.every(u => u.bought);
        },
        progress: (state) => {
          const total = window.upgradesList.length;
          const bought = window.upgradesList.filter(u => u.bought).length;
          return total === 0 ? 0 : bought / total;
        }
      },
      {
        id: 'm6',
        title: 'Jogador de Longa Jornada',
        desc: 'Jogue por pelo menos 2 horas (7200 segundos).',
        reward: '7000 coins',
        requirement: (state) => state.timePlayed >= 7200,
        progress: (state) => Math.min(1, state.timePlayed / 7200)
      },
      {
        id: 'm7',
        title: 'Mestre da Colheita',
        desc: 'Realize 10.000 cliques de colher durante o jogo.',
        reward: '9000 coins',
        requirement: (state) => state.totalClicks >= 10000,
        progress: (state) => Math.min(1, (state.totalClicks || 0) / 10000)
      }
    ];
    if(!window.gameState){window.gameState={workers:0,totalEarned:0,timePlayed:0,totalClicks:0};}
    function renderMissions(){
      const c=document.getElementById('missionsList');
      c.innerHTML='';
      missions.forEach(m=>{
        const prog=m.progress(window.gameState);
        const done=m.requirement(window.gameState);
        const card=document.createElement('div');
        card.className='mission-card';
        card.innerHTML=`<div class="mission-title">${m.title}</div>
        <div class="mission-desc">${m.desc}</div>
        <div class="mission-reward">Recompensa: ${m.reward}</div>
        <div class="mission-progress"><div style="width:${prog*100}%"></div></div>
        <button class="mission-button" ${done?'disabled':''} data-id="${m.id}">${done?'Conclu√≠do':'Aceitar miss√£o'}</button>`;
        c.appendChild(card);
      });
    }
    document.getElementById('backBtn').addEventListener('click',()=>{window.location.href='index.html';});
    renderMissions();
  </script>
</body>
</html>
